import{_ as me}from"./DTA01M-O.js";import{f as ee,c as n,a as r,b as y,h as c,y as V,o as a,e as te,s as he,z as be,r as b,m as X,A as ve,B as xe,C as fe,D as _e,E as we,G as F,x as v,q as ke,j as s,F as A,p as I,t as d,k as Ce,H as x,d as f,w as Z,_ as Ae,I as Ie}from"#entry";import{_ as Se}from"./DmZQ71QT.js";import{_ as Ve}from"./DwVv3k0D.js";import{_ as qe}from"./BCnVN3n5.js";import{_ as Ee}from"./BHaDRoue.js";import{g as _}from"./CTEISAWL.js";import{u as Le}from"./D61rUm4b.js";const $e={class:"flex items-center gap-3"},Be=["value","placeholder"],De=ee({__name:"CyberSearchBar",props:{modelValue:{},placeholder:{default:"Search articles by title, CVE, tags, or content..."},customClass:{default:""}},emits:["update:modelValue","clear"],setup(q,{emit:w}){const E=w,L=S=>{const D=S.target;E("update:modelValue",D.value)},l=()=>{E("update:modelValue",""),E("clear")};return(S,D)=>{const $=te;return a(),n("div",{class:V(["bg-gray-900 border-2 border-cyan-500/30 rounded-lg p-4 transition-all","shadow-[0_0_15px_rgba(34,211,238,0.15)]","hover:border-cyan-500/50 hover:shadow-[0_0_20px_rgba(34,211,238,0.25)]",q.customClass])},[r("div",$e,[y($,{name:"heroicons:magnifying-glass-20-solid",class:"w-5 h-5 text-cyan-400 flex-shrink-0"}),r("input",{value:q.modelValue,onInput:L,type:"text",placeholder:q.placeholder,class:"flex-1 bg-transparent border-none outline-none text-gray-100 placeholder-gray-500 font-medium"},null,40,Be),q.modelValue?(a(),n("button",{key:0,onClick:l,class:"p-1 hover:bg-cyan-500/20 rounded-full transition-colors flex-shrink-0","aria-label":"Clear search"},[y($,{name:"heroicons:x-mark-20-solid",class:"w-5 h-5 text-cyan-400 hover:text-cyan-300"})])):c("",!0)])],2)}}}),Re=Object.assign(De,{__name:"CyberSearchBar"}),Te={class:"min-h-screen bg-gray-950 text-gray-100"},ze={class:"container mx-auto px-4 py-8 max-w-6xl"},Ne={key:0,class:"space-y-6"},Fe={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8"},He={key:1,class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8"},je={class:"relative z-10"},Me={class:"text-3xl font-black text-cyan-400"},Oe={key:0,class:"text-xs text-cyan-400 font-medium mt-1"},Ue={class:"relative z-10"},Qe={class:"text-3xl font-black text-red-500"},Ge={key:0,class:"text-xs text-red-500 font-medium mt-1"},Je={class:"relative z-10"},Ke={class:"text-3xl font-black text-orange-500"},Pe={key:0,class:"text-xs text-orange-500 font-medium mt-1"},Ye={class:"relative z-10"},We={class:"text-3xl font-black text-yellow-500"},Xe={key:0,class:"text-xs text-yellow-500 font-medium mt-1"},Ze={key:2,class:"mb-6 flex gap-4"},et={class:"flex items-center gap-3"},tt={class:"text-sm text-gray-400 whitespace-nowrap"},rt={key:3,class:"mb-6"},st={class:"bg-gray-900 border-2 border-purple-500/30 rounded-lg p-4 shadow-[0_0_15px_rgba(168,85,247,0.15)]"},ot={class:"flex items-center gap-2 mb-3"},at={key:0,class:"ml-auto text-sm text-cyan-400"},nt={key:0,class:"mb-3 flex flex-wrap gap-2"},lt={class:"flex items-center gap-2 flex-wrap"},it=["onClick"],ct={class:"ml-1 text-xs opacity-60"},dt={key:1,class:"flex flex-wrap gap-2"},ut={class:"ml-1 text-xs opacity-75"},gt=["onClick"],pt={class:"ml-1 text-xs opacity-75"},yt={key:2,class:"text-sm text-gray-500 dark:text-gray-400 italic"},mt={key:4,class:"space-y-6"},ht={class:"flex items-stretch relative overflow-hidden"},bt={class:"flex-1 min-w-0 p-6 z-10 relative"},vt={class:"flex items-start gap-3 mb-2"},xt={class:"text-2xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-400 hover:from-pink-400 hover:to-cyan-400 transition-all flex-1"},ft={class:"text-lg text-gray-300 mb-3 font-semibold"},_t={class:"text-gray-400 mb-4 line-clamp-2"},wt={key:0,class:"mb-3"},kt={class:"flex flex-wrap gap-2"},Ct={class:"flex flex-wrap gap-4 text-sm text-cyan-400/80"},At={class:"flex items-center"},It={class:"flex items-center"},St={key:0,class:"flex items-center"},Vt={key:1,class:"mt-3 flex flex-wrap gap-2"},qt={key:0,class:"px-2 py-1 text-gray-500 text-xs"},Et={class:"relative w-64 flex-shrink-0"},Lt={class:"absolute inset-0"},$t={class:"relative z-10 p-4 flex flex-col items-end gap-2"},Bt={key:5,class:"text-center py-16"},Dt="readArticles",Rt=ee({__name:"index",setup(q){const w=he(),E=be(),L=w.params.siteId,l=b([]),S=b(!0);X(()=>{try{const t=ve(),e=xe(fe(t,"sites",L,"articles"),_e("publishedAt","desc")),i=we(e);F(i,m=>{m&&(l.value=m,S.value=!1)},{immediate:!0})}catch(t){console.error("Error initializing articles collection:",t),S.value=!1}});const{getFeaturedImageAlt:D,getCyberPlaceholderUrl:$,getArticleImageUrl:re}=Le(),H=b({});F(l,async t=>{if(!t)return;const e={};for(const i of t)e[i.articleId]=await re(i);H.value=e},{immediate:!0});const se=t=>H.value[t.articleId]||$(600,400),oe=t=>{console.error("Image failed to load:",t)},ae=()=>{const t=w.query.q;return typeof t=="string"?t:""},ne=()=>{const t=w.query.categories;return typeof t=="string"?t.split(",").filter(Boolean):Array.isArray(t)?t.filter(Boolean):[]},h=b(ae()),u=b(ne()),g=b([]),B=b(!1),R=t=>{const e=g.value.indexOf(t);e>-1?g.value.splice(e,1):g.value.push(t)},le=()=>{g.value=[]},ie=()=>{const t={};h.value.trim()&&(t.q=h.value.trim()),u.value.length>0&&(t.categories=u.value.join(","));const e=w.query.q||"",i=w.query.categories||"",m=t.q||"",p=t.categories||"";(e!==m||i!==p)&&E.replace({query:t})};F([h,u],()=>{ie()},{deep:!0});const j=t=>{const e=u.value.indexOf(t);e>-1?u.value.splice(e,1):u.value.push(t)},M=()=>{u.value=[]},O=b({}),ce=()=>{if(!(typeof window>"u"))try{const t=localStorage.getItem(Dt);t&&(O.value=JSON.parse(t))}catch(t){console.error("Error loading read articles:",t)}},T=t=>!!O.value[t],de=v(()=>!l.value||l.value.length===0?0:l.value.filter(t=>T(t.articleId)).length);X(()=>{ce()});const U=t=>t?typeof t=="object"&&"toMillis"in t&&typeof t.toMillis=="function"?t.toMillis():new Date(t).getTime():0,z=v(()=>{if(!l.value||l.value.length===0)return[];let t=l.value;if(B.value&&(t=t.filter(e=>!T(e.articleId))),u.value.length>0&&(t=t.filter(e=>e.display.category&&u.value.includes(e.display.category))),g.value.length>0&&(t=t.filter(e=>{const i=e.cyber.severity||"";return!!(g.value.includes("critical")&&i==="critical"||g.value.includes("high")&&i==="high"||g.value.includes("medium-low")&&["medium","low","informational"].includes(i))})),h.value.trim()){const e=h.value.toLowerCase().trim();t=t.filter(i=>!!(i.headline?.toLowerCase().includes(e)||i.title?.toLowerCase().includes(e)||i.excerpt?.toLowerCase().includes(e)||i.cyber.threats?.cves?.some(m=>m.toLowerCase().includes(e))||i.cyber.tags?.some(m=>m.toLowerCase().includes(e))||i.display.category?.toLowerCase().includes(e)))}return t}),Q=v(()=>{if(!z.value||z.value.length===0)return[];const t={critical:0,high:1,medium:2,low:3,informational:4};return[...z.value].sort((e,i)=>{const m=e.cyber.severity||"informational",p=i.cyber.severity||"informational",k=t[m]-t[p];if(k!==0)return k;const N=U(e.publishedAt||e.createdAt);return U(i.publishedAt||i.createdAt)-N})}),G=v(()=>{if(!l.value||l.value.length===0)return[];const t=new Set;return l.value.forEach(e=>{e.display.category&&t.add(e.display.category)}),Array.from(t).sort()}),J=v(()=>G.value.filter(t=>!u.value.includes(t))),K=t=>l.value?.filter(e=>e.display.category===t).length||0,P=v(()=>l.value?.filter(t=>t.cyber.severity==="critical").length||0),Y=v(()=>l.value?.filter(t=>t.cyber.severity==="high").length||0),ue=v(()=>l.value?.filter(t=>["medium","low","informational"].includes(t.cyber.severity||"")).length||0),ge=t=>{if(!t)return"N/A";try{return(t.toDate?t.toDate():new Date(t)).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}};return ke({title:"Cyber Security Advisories | Latest Vulnerability Reports",meta:[{name:"description",content:"Browse the latest cybersecurity advisories, vulnerability reports, and threat intelligence from trusted sources."},{property:"og:title",content:"Cyber Security Advisories"},{property:"og:description",content:"Latest vulnerability reports and threat intelligence"},{property:"og:type",content:"website"}]}),(t,e)=>{const i=me,m=Re,p=te,k=Se,N=Ve,W=Ae,pe=qe,ye=Ee;return a(),n("div",Te,[y(i),r("div",ze,[s(S)?(a(),n("div",Ne,[r("div",Fe,[(a(),n(A,null,I(4,o=>r("div",{key:o,class:"bg-gray-900 border-2 border-gray-700 rounded-lg p-4 animate-pulse"},[...e[5]||(e[5]=[r("div",{class:"h-8 bg-gray-800 rounded mb-2"},null,-1),r("div",{class:"h-4 bg-gray-800 rounded w-20"},null,-1)])])),64))]),(a(),n(A,null,I(3,o=>r("div",{key:o,class:"bg-gray-900 border-2 border-gray-700 rounded-lg p-6 animate-pulse"},[...e[6]||(e[6]=[r("div",{class:"h-6 bg-gray-800 rounded w-3/4 mb-3"},null,-1),r("div",{class:"h-4 bg-gray-800 rounded w-1/2 mb-4"},null,-1),r("div",{class:"h-4 bg-gray-800 rounded w-full mb-2"},null,-1),r("div",{class:"h-4 bg-gray-800 rounded w-full"},null,-1)])])),64))])):s(l)&&s(l).length>0?(a(),n("div",He,[r("button",{onClick:le,class:V(["relative overflow-hidden bg-gray-900 border-2 rounded-lg p-4 text-center transition-all group",s(g).length===0?"border-cyan-500 shadow-[0_0_20px_rgba(34,211,238,0.5)] scale-105":"border-gray-700 hover:border-cyan-500 hover:shadow-[0_0_15px_rgba(34,211,238,0.3)] hover:scale-105"])},[e[8]||(e[8]=r("div",{class:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"},null,-1)),r("div",je,[r("div",Me,d(s(l).length),1),e[7]||(e[7]=r("div",{class:"text-sm text-gray-400 uppercase tracking-wider font-bold"},"Total Articles",-1)),s(g).length===0?(a(),n("div",Oe,"● ACTIVE")):c("",!0)])],2),r("button",{onClick:e[0]||(e[0]=o=>R("critical")),class:V(["relative overflow-hidden bg-gray-900 border-2 rounded-lg p-4 text-center transition-all group",s(g).includes("critical")?"border-red-500 shadow-[0_0_20px_rgba(239,68,68,0.5)] scale-105":"border-gray-700 hover:border-red-500 hover:shadow-[0_0_15px_rgba(239,68,68,0.3)] hover:scale-105"])},[e[10]||(e[10]=r("div",{class:"absolute inset-0 bg-gradient-to-br from-red-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"},null,-1)),r("div",Ue,[r("div",Qe,d(s(P)),1),e[9]||(e[9]=r("div",{class:"text-sm text-gray-400 uppercase tracking-wider font-bold"},"Critical",-1)),s(g).includes("critical")?(a(),n("div",Ge,"● ACTIVE")):c("",!0)])],2),r("button",{onClick:e[1]||(e[1]=o=>R("high")),class:V(["relative overflow-hidden bg-gray-900 border-2 rounded-lg p-4 text-center transition-all group",s(g).includes("high")?"border-orange-500 shadow-[0_0_20px_rgba(249,115,22,0.5)] scale-105":"border-gray-700 hover:border-orange-500 hover:shadow-[0_0_15px_rgba(249,115,22,0.3)] hover:scale-105"])},[e[12]||(e[12]=r("div",{class:"absolute inset-0 bg-gradient-to-br from-orange-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"},null,-1)),r("div",Je,[r("div",Ke,d(s(Y)),1),e[11]||(e[11]=r("div",{class:"text-sm text-gray-400 uppercase tracking-wider font-bold"},"High",-1)),s(g).includes("high")?(a(),n("div",Pe,"● ACTIVE")):c("",!0)])],2),r("button",{onClick:e[2]||(e[2]=o=>R("medium-low")),class:V(["relative overflow-hidden bg-gray-900 border-2 rounded-lg p-4 text-center transition-all group",s(g).includes("medium-low")?"border-yellow-500 shadow-[0_0_20px_rgba(234,179,8,0.5)] scale-105":"border-gray-700 hover:border-yellow-500 hover:shadow-[0_0_15px_rgba(234,179,8,0.3)] hover:scale-105"])},[e[14]||(e[14]=r("div",{class:"absolute inset-0 bg-gradient-to-br from-yellow-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"},null,-1)),r("div",Ye,[r("div",We,d(s(ue)),1),e[13]||(e[13]=r("div",{class:"text-sm text-gray-400 uppercase tracking-wider font-bold"},"Medium/Low",-1)),s(g).includes("medium-low")?(a(),n("div",Xe,"● ACTIVE")):c("",!0)])],2)])):c("",!0),s(l)&&s(l).length>0?(a(),n("div",Ze,[y(m,{modelValue:s(h),"onUpdate:modelValue":e[3]||(e[3]=o=>Ce(h)?h.value=o:null),class:"flex-1"},null,8,["modelValue"]),r("button",{onClick:e[4]||(e[4]=o=>B.value=!s(B)),class:"bg-gray-900 border-2 border-green-500/30 rounded-lg p-4 shadow-[0_0_15px_rgba(34,197,94,0.15)] hover:border-green-500/50 hover:shadow-[0_0_20px_rgba(34,197,94,0.25)] transition-all flex items-center gap-3 flex-shrink-0"},[r("div",et,[r("div",{class:V(["w-5 h-5 rounded border-2 flex items-center justify-center transition-all",s(B)?"bg-green-500/30 border-green-500 shadow-[0_0_10px_rgba(34,197,94,0.5)]":"border-green-500/50"])},[s(B)?(a(),x(p,{key:0,name:"heroicons:check-20-solid",class:"w-4 h-4 text-green-300"})):c("",!0)],2),e[15]||(e[15]=r("span",{class:"font-bold text-green-300 uppercase tracking-wider whitespace-nowrap"},"Hide Read Articles",-1))]),r("span",tt,d(s(de))+" read ",1)])])):c("",!0),s(l)&&s(l).length>0&&s(G).length>0?(a(),n("div",rt,[r("div",st,[r("div",ot,[y(p,{name:"heroicons:funnel-20-solid",class:"w-5 h-5 text-purple-400"}),e[16]||(e[16]=r("h3",{class:"font-bold text-purple-300 uppercase tracking-wider"},"Filter by Category",-1)),s(u).length>0||s(h)?(a(),n("span",at," Showing "+d(s(Q).length)+" of "+d(s(l).length),1)):c("",!0)]),s(u).length>0?(a(),n("div",nt,[r("div",lt,[e[18]||(e[18]=r("span",{class:"text-xs font-bold text-purple-400 uppercase tracking-wider"},"Active filters:",-1)),(a(!0),n(A,null,I(s(u),o=>(a(),n("button",{key:"chip-"+o,onClick:C=>j(o),class:"px-3 py-1.5 rounded text-xs font-bold transition-all flex items-center gap-1.5 group bg-purple-500/20 border border-purple-500/50 text-purple-300 hover:border-purple-500 hover:shadow-[0_0_10px_rgba(168,85,247,0.4)] uppercase tracking-wider"},[s(_)(o).icon?(a(),x(p,{key:0,name:s(_)(o).icon,class:"w-3.5 h-3.5"},null,8,["name"])):c("",!0),f(" "+d(s(_)(o).label)+" ",1),r("span",ct,"("+d(K(o))+")",1),y(p,{name:"heroicons:x-mark-20-solid",class:"w-3.5 h-3.5 opacity-60 group-hover:opacity-100"})],8,it))),128)),s(u).length>1?(a(),n("button",{key:0,onClick:M,class:"px-3 py-1.5 rounded text-xs font-bold bg-gray-800 border border-gray-600 text-gray-400 hover:border-cyan-500 hover:text-cyan-400 hover:shadow-[0_0_10px_rgba(34,211,238,0.3)] transition-all flex items-center gap-1 uppercase tracking-wider"},[y(p,{name:"heroicons:x-circle-20-solid",class:"w-3.5 h-3.5"}),e[17]||(e[17]=f(" Clear all ",-1))])):c("",!0)])])):c("",!0),s(J).length>0?(a(),n("div",dt,[s(u).length>0?(a(),n("button",{key:0,onClick:M,class:"px-3 py-2 rounded text-sm font-bold transition-all flex items-center gap-2 bg-gray-800 border border-cyan-500/30 text-cyan-400 hover:border-cyan-500 hover:shadow-[0_0_10px_rgba(34,211,238,0.3)] hover:scale-105 uppercase tracking-wider"},[y(p,{name:"heroicons:squares-2x2-20-solid",class:"w-4 h-4"}),e[19]||(e[19]=f(" Show All ",-1)),r("span",ut,"("+d(s(l).length)+")",1)])):c("",!0),(a(!0),n(A,null,I(s(J),o=>(a(),n("button",{key:o,onClick:C=>j(o),class:"px-4 py-2 rounded text-sm font-bold transition-all flex items-center gap-2 bg-gray-800 border border-gray-700 text-gray-400 hover:border-purple-500 hover:text-purple-300 hover:shadow-[0_0_10px_rgba(168,85,247,0.3)] hover:scale-105"},[s(_)(o).icon?(a(),x(p,{key:0,name:s(_)(o).icon,class:"w-4 h-4"},null,8,["name"])):c("",!0),f(" "+d(s(_)(o).label)+" ",1),r("span",pt,"("+d(K(o))+")",1)],8,gt))),128))])):s(u).length>0?(a(),n("div",yt," All categories selected ")):c("",!0)])])):c("",!0),s(l)&&s(l).length>0?(a(),n("div",mt,[(a(!0),n(A,null,I(s(Q),o=>(a(),x(pe,{key:o.articleId,variant:"purple"},{default:Z(()=>[y(W,{to:`/site/${s(L)}/articles/${o.articleId}`,class:"block"},{default:Z(()=>[r("div",ht,[r("div",bt,[r("div",vt,[r("h2",xt,d(o.headline),1),o.cyber.severity==="critical"?(a(),x(k,{key:0,variant:"critical",label:"CRITICAL","custom-class":"flex-shrink-0 mt-1"})):o.cyber.severity==="high"?(a(),x(k,{key:1,variant:"high",label:"HIGH","custom-class":"flex-shrink-0 mt-1"})):c("",!0)]),r("h3",ft,d(o.title),1),r("p",_t,d(o.excerpt),1),o.cyber.threats?.cves&&o.cyber.threats.cves.length>0?(a(),n("div",wt,[r("div",kt,[(a(!0),n(A,null,I(o.cyber.threats.cves,C=>(a(),n("span",{key:C,class:"px-3 py-1 bg-red-500/20 border border-red-500/50 text-red-400 rounded-full text-xs font-mono font-bold shadow-[0_0_10px_rgba(239,68,68,0.3)]"},d(C),1))),128))])])):c("",!0),r("div",Ct,[r("div",At,[y(p,{name:"heroicons:calendar-20-solid",class:"w-4 h-4 mr-1"}),f(" "+d(ge(o.publishedAt||o.createdAt)),1)]),r("div",It,[y(p,{name:"heroicons:clock-20-solid",class:"w-4 h-4 mr-1"}),f(" "+d(o.display.readingTime)+" min read ",1)]),o.sources&&o.sources.length>0?(a(),n("div",St,[y(p,{name:"heroicons:link-20-solid",class:"w-4 h-4 mr-1"}),f(" "+d(o.sources.length)+" sources ",1)])):c("",!0)]),o.cyber.tags&&o.cyber.tags.length>0?(a(),n("div",Vt,[(a(!0),n(A,null,I(o.cyber.tags.slice(0,5),C=>(a(),n("span",{key:C,class:"px-2 py-1 bg-gray-800 border border-purple-500/30 text-purple-300 rounded text-xs font-medium hover:border-purple-500/60 transition-colors"},d(C),1))),128)),o.cyber.tags.length>5?(a(),n("span",qt," +"+d(o.cyber.tags.length-5)+" more ",1)):c("",!0)])):c("",!0)]),r("div",Et,[r("div",Lt,[y(N,{src:se(o),alt:s(D)(o),loading:"lazy",class:"w-full h-full object-cover opacity-60",placeholder:s($)(512,512),onError:oe},null,8,["src","alt","placeholder"]),e[20]||(e[20]=r("div",{class:"absolute inset-0 bg-gradient-to-r from-gray-900 from-30% via-gray-900/70 via-50% to-gray-900/20"},null,-1)),e[21]||(e[21]=r("div",{class:"absolute inset-0 bg-gradient-to-b from-purple-900/15 via-transparent to-cyan-900/15"},null,-1))]),r("div",$t,[o.display.category?(a(),x(k,{key:0,variant:"category",icon:s(_)(o.display.category).icon,label:s(_)(o.display.category).label},null,8,["icon","label"])):c("",!0),T(o.articleId)?(a(),x(k,{key:1,variant:"success",icon:"heroicons:check-circle-20-solid",label:"READ"})):c("",!0)])])])]),_:2},1032,["to"])]),_:2},1024))),128))])):(a(),n("div",Bt,[y(p,{name:"heroicons:document-text-20-solid",class:"w-16 h-16 mx-auto mb-4 text-gray-300 dark:text-gray-600"}),e[22]||(e[22]=r("h2",{class:"text-2xl font-bold mb-2 text-gray-700 dark:text-gray-300"},"No Articles Found",-1)),e[23]||(e[23]=r("p",{class:"text-gray-500 dark:text-gray-400 mb-6"}," There are no cybersecurity articles available yet. ",-1)),e[24]||(e[24]=r("p",{class:"text-sm text-gray-400 dark:text-gray-500"},[f(" Run: "),r("code",{class:"bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded"},"npx tsx scripts/create-sample-article.ts")],-1))]))]),y(ye,{siteId:s(L),stats:{critical:s(P),high:s(Y),total:s(l)?.length||0}},null,8,["siteId","stats"])])}}}),Ut=Ie(Rt,[["__scopeId","data-v-f8602e17"]]);export{Ut as default};
